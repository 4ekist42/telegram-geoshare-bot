
# Telegram GeoShare Bot

–ë–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ (live-location) –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º / –æ–ø–∞—Å–Ω—ã–º –∑–æ–Ω–∞–º —Å –≥–∏–±–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ JSON –∏ –ø—Ä–æ—Å—Ç—É—é –∫–∞—Ä—Ç—É-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä.

–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫—Ä—É–≥–æ–≤—ã—Ö –∑–æ–Ω –∏ —à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –≤ Telegram –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ó–æ–Ω—ã (–≥–µ–æ–∑–æ–Ω—ã)

- –î–≤–∞ —Ç–∏–ø–∞ –∑–æ–Ω:
  - **–±–µ–∑–æ–ø–∞—Å–Ω–∞—è** (`secure`);
  - **–æ–ø–∞—Å–Ω–∞—è** (`danger`).
- –ó–æ–Ω—ã ‚Äî **–∫—Ä—É–≥–∏** —Å —Ü–µ–Ω—Ç—Ä–æ–º (—à–∏—Ä–æ—Ç–∞/–¥–æ–ª–≥–æ—Ç–∞) –∏ —Ä–∞–¥–∏—É—Å–æ–º –≤ –º–µ—Ç—Ä–∞—Ö.
- –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å **–∏–º—è** –∑–æ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
  - –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω:  
    - ¬´—É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤—ã—Ö–æ–¥–µ –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã¬ª  
    - ¬´—É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∑–æ–Ω—É¬ª
  - –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω:  
    - ¬´—É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã¬ª  
    - ¬´—É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤—Ö–æ–¥–µ –≤ –æ–ø–∞—Å–Ω—É—é –∑–æ–Ω—É¬ª
- –î–ª—è –∫–∞–∂–¥–æ–π –∑–æ–Ω—ã –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
  - —Ñ–ª–∞–∂–æ–∫ `override`;
  - `notify_on_enter` ‚Äî —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤—Ö–æ–¥–µ –≤ —ç—Ç—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–æ–Ω—É;
  - `notify_on_exit` ‚Äî —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –≤—ã—Ö–æ–¥–µ –∏–∑ —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–æ–Ω—ã;
  - –µ—Å–ª–∏ `override=false` ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–≥–ª–æ–±–∞–ª—å–Ω—ã–µ** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –µ—ë —Ç–∏–ø–∞ (secure/danger).

### ¬´–ë–µ—Å—à–æ–≤–Ω—ã–µ¬ª –∑–æ–Ω—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º

- –ó–æ–Ω—ã **–æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø–æ –∏–º–µ–Ω–∏**:
  - –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–æ–Ω –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ `name`, –±–æ—Ç —Å—á–∏—Ç–∞–µ—Ç –∏—Ö **–æ–¥–Ω–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π –∑–æ–Ω–æ–π**;
  - –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∏–∑ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∑–æ–Ω—ã `id=1` –≤ `id=2` —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º `name`:
    - **–Ω–µ** –±—É–¥–µ—Ç ¬´–≤—ã—Ö–æ–¥–∞¬ª –∏ ¬´–≤—Ö–æ–¥–∞¬ª ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—Å—ë –≤—Ä–µ–º—è –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –∑–æ–Ω—ã.
- –ï—Å–ª–∏ –∏–º—è —É –∑–æ–Ω—ã **–Ω–µ –∑–∞–¥–∞–Ω–æ**:
  - –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∑–æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ `id`, —Ç.–µ. –∫–∞–∂–¥–∞—è –±–µ–∑—ã–º—è–Ω–Ω–∞—è –∑–æ–Ω–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∑–æ–Ω–∞.

–í–æ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–∞—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è —Ç–∞–∫–∏—Ö –∑–æ–Ω:

- –µ—Å–ª–∏ –µ—Å—Ç—å –∏–º—è: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω–æ ‚Äî `"–°–∫–ª–∞–¥"` (–≤ –∫–∞–≤—ã—á–∫–∞—Ö);
- –µ—Å–ª–∏ –∏–º–µ–Ω–∏ –Ω–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `#id`, –Ω–∞–ø—Ä–∏–º–µ—Ä `#3`.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ live-location –∏ –æ–±—ã—á–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏

–ë–æ—Ç —É–º–µ–µ—Ç:

- –ø—Ä–∏–Ω–∏–º–∞—Ç—å:
  - –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–æ—á–µ—á–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π;
  - —Å–æ–æ–±—â–µ–Ω–∏—è —Å **live-location** (–∂–∏–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ Telegram –æ–±–Ω–æ–≤–ª—è–µ—Ç);
- –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
  - **–Ω–∞—á–∞–ª–æ –≤–µ—â–∞–Ω–∏—è** live-location;
  - **–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç;
  - **–æ–∫–æ–Ω—á–∞–Ω–∏–µ –≤–µ—â–∞–Ω–∏—è** live-location (–∫–æ–≥–¥–∞ live_period –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–æ–≤–∏–ª).

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –±–æ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–∑—Ä–µ—à—ë–Ω –ª–∏ —ç—Ç–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–∏—ë–º –ª–æ–∫–∞—Ü–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π¬ª).
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≤ –∫–∞–∫–∏—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω–∞—Ö —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —ç—Ç–æ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
   - –∫–∞–∫–∏–µ –∑–æ–Ω—ã ¬´–ø–æ–∫–∏–Ω—É—Ç—ã¬ª;
   - –∫–∞–∫–∏–µ –∑–æ–Ω—ã ¬´–≤—Ö–æ–¥¬ª (–Ω–æ–≤—ã–µ);
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
   - –æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã:
     - üî¥ `–í—Ö–æ–¥ –≤ –æ–ø–∞—Å–Ω—É—é –∑–æ–Ω—É "–ò–º—è"` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ `notify_enter`);
     - ‚ö†Ô∏è `–í—ã—Ö–æ–¥ –∏–∑ –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã "–ò–º—è"` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ `notify_exit`);
   - –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã:
     - ‚ö†Ô∏è `–í—ã—Ö–æ–¥ –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã "–ò–º—è"` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ `notify_exit`);
     - ‚úÖ `–í–æ–∑–≤—Ä–∞—Ç –≤ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∑–æ–Ω—É "–ò–º—è"` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ `notify_enter`).

### –°–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ä—Ç–µ/—Å—Ç–æ–ø–µ –≤–µ—â–∞–Ω–∏—è

–ü—Ä–∏ **—Å—Ç–∞—Ä—Ç–µ** live-location –±–æ—Ç:

- –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–Ω –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç:
  - —Ç–æ–ª—å–∫–æ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–µ,
  - —Ç–æ–ª—å–∫–æ –≤ –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–µ,
  - –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π, –∏ –≤ –æ–ø–∞—Å–Ω–æ–π,
  - –Ω–∏ –≤ –æ–¥–Ω–æ–π –∏–∑ –∑–æ–Ω.

–ò –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥–º–∏–Ω–∞–º –æ–¥–Ω–æ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π:

- `‚ñ∂Ô∏è –ù–∞—á–∞–ª –≤–µ—â–∞–Ω–∏–µ –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã "–ò–º—è"`
- `‚ñ∂Ô∏è –ù–∞—á–∞–ª –≤–µ—â–∞–Ω–∏–µ –∏–∑ –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã "–ò–º—è"`
- `‚ñ∂Ô∏è –ù–∞—á–∞–ª –≤–µ—â–∞–Ω–∏–µ: –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏ –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–µ`
- `‚ñ∂Ô∏è –ù–∞—á–∞–ª –≤–µ—â–∞–Ω–∏–µ –≤–Ω–µ –∑–∞–¥–∞–Ω–Ω—ã—Ö –∑–æ–Ω`

–ü—Ä–∏ **–æ—Å—Ç–∞–Ω–æ–≤–∫–µ** live-location (–ª–∏–±–æ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ `live_period`, –ª–∏–±–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª):

- –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥–º–∏–Ω–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
  - –Ω–∞–ø—Ä–∏–º–µ—Ä: `‚èπ –û–∫–æ–Ω—á–∞–Ω–∏–µ –≤–µ—â–∞–Ω–∏—è live-location`.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–¥–º–∏–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ (—Å–º. –¥–∞–ª—å—à–µ).

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ª–æ–∫–∞—Ü–∏–∏

–í –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- `notify_absent_enabled` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ª–æ–∫–∞—Ü–∏–∏;
- `notify_absent_minutes` ‚Äî –ø–æ—Ä–æ–≥ –≤ –º–∏–Ω—É—Ç–∞—Ö.

–õ–æ–≥–∏–∫–∞:

- –±–æ—Ç –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç **–≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏** –æ—Ç –∫–∞–∂–¥–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –ø—Ä–µ–≤—ã—Å–∏–ª–æ –ª–∏ ¬´–º–æ–ª—á–∞–Ω–∏–µ¬ª –ø–æ—Ä–æ–≥;
- –µ—Å–ª–∏ `notify_absent_enabled=true` –∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ø–æ—Ä–æ–≥ ‚Äî –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥–º–∏–Ω–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–∏–¥–∞:

  ```text
  ‚è∞ –ù–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ –±–æ–ª–µ–µ N –º–∏–Ω—É—Ç
  –û—Ç: <–æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å>
  ```

–ï—Å–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ –≤–∫–ª—é—á—ë–Ω —Ñ–ª–∞–≥ `send_current_location_with_alert`, –∏ —É –±–æ—Ç–∞ –µ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –±–æ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å—ã–ª–∞–µ—Ç **–≥–µ–æ-—Ç–æ—á–∫—É**.

### –ü—Ä–∏—ë–º –ª–æ–∫–∞—Ü–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í —Å–µ–∫—Ü–∏–∏ `telegram.accept_from` –∑–∞–¥–∞—ë—Ç—Å—è, –æ—Ç –∫–æ–≥–æ –±–æ—Ç –≤–æ–æ–±—â–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é:

- `mode: "any"` ‚Äî –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ—Ç **–ª—é–±—ã—Ö** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- `mode: "list"` ‚Äî –ø—Ä–∏–Ω–∏–º–∞—Ç—å **—Ç–æ–ª—å–∫–æ** –æ—Ç —Å–ø–∏—Å–∫–∞ `users`.

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–ø–∏—Å–∫–µ:

```json
{ "id": 123456789, "name": "–ò–º—è" }
```

–ï—Å–ª–∏ `mode="list"` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ `users` ‚Äî –ª–æ–∫–∞—Ü–∏—è **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è**.

### –ü–æ–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

–í –∫–æ–Ω—Ñ–∏–≥–µ:

```json
"show_sender": {
  "show_name": true,
  "show_id": true
}
```

–ë–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É ¬´–û—Ç: ...¬ª –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º:

1. –ò—â–µ—Ç –∏–º—è –≤ `telegram.admins[].name` (–µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–∞–º –∞–¥–º–∏–Ω –∏ —Ç–∞–º –µ—Å—Ç—å –∏–º—è).
2. –ò—â–µ—Ç –∏–º—è –≤ `telegram.accept_from.users[].name` (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω–æ).
3. –ï—Å–ª–∏ `show_name=true`:
   - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –∏–º—è;
   - –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `full_name` –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è Telegram (–µ—Å–ª–∏ –µ—Å—Ç—å).
4. –ï—Å–ª–∏ `show_id=true`:
   - –¥–æ–±–∞–≤–ª—è–µ—Ç `id=123456789`.

–ï—Å–ª–∏ –≤ –∏—Ç–æ–≥–µ –Ω–µ—Ç –Ω–∏ –∏–º–µ–Ω–∏, –Ω–∏ id (–æ–±–æ–∏—Ö —Ñ–ª–∞–∂–∫–æ–≤ –Ω–µ—Ç) ‚Äî –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–¥–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ–≤–æ–π `user_id`.

–ü—Ä–∏–º–µ—Ä—ã:

- `–û—Ç: –í–∞—Å—è, id=123456789`
- `–û—Ç: id=123456789`
- `–û—Ç: –í–∞—Å—è`
- `–û—Ç: 123456789`

---

## Telegram-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

–°–µ–∫—Ü–∏—è `telegram` –≤ –∫–æ–Ω—Ñ–∏–≥–µ:

```json
"telegram": {
  "global": { ... },
  "admins": [ ... ],
  "accept_from": { ... },
  "show_sender": { ... }
}
```

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ Telegram-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```json
"global": {
  "notify_location_start": true,
  "notify_location_stop": true,
  "notify_absent_enabled": true,
  "notify_absent_minutes": 10,
  "send_current_location_with_alert": false
}
```

- `notify_location_start` ‚Äî —à–ª—ë–º –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ **—Å—Ç–∞—Ä—Ç–µ** –≤–µ—â–∞–Ω–∏—è (‚ñ∂Ô∏è).
- `notify_location_stop` ‚Äî —à–ª—ë–º –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± **–æ–∫–æ–Ω—á–∞–Ω–∏–∏** –≤–µ—â–∞–Ω–∏—è (‚èπ).
- `notify_absent_enabled` / `notify_absent_minutes` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–æ—Ä–æ–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ¬´‚è∞ –ù–µ—Ç –ª–æ–∫–∞—Ü–∏–∏¬ª.
- `send_current_location_with_alert` ‚Äî –µ—Å–ª–∏ **true**, –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ –∏–∑ –∑–æ–Ω—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ —Ç.–ø.) –ø–æ—Å–ª–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±–æ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å—ã–ª–∞–µ—Ç **–≥–µ–æ-—Ç–æ—á–∫—É** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

> –í–∞–∂–Ω–æ: –≤ —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã **–Ω–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è**, –≥–µ–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–ª–∞–≥ –≤–∫–ª—é—á—ë–Ω.

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

–ú–∞—Å—Å–∏–≤ `admins`:

```json
"admins": [
  {
    "id": 111111111,
    "name": "–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω",
    "override": false,
    "notify_location_start": true,
    "notify_location_stop": true,
    "notify_absent_enabled": true,
    "notify_absent_minutes": 10,
    "send_current_location_with_alert": true,
    "zones": [1, 2, 5]
  }
]
```

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–¥–º–∏–Ω–∞:

- `id` ‚Äî Telegram ID, –∫—É–¥–∞ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- `name` ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∏–º—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–¥–ø–∏—Å–∏ ¬´–û—Ç:¬ª –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º).
- `override`:
  - `false` ‚Äî –∞–¥–º–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≥–ª–æ–±–∞–ª—å–Ω—ã–µ** telegram-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏;
  - `true` ‚Äî –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—è –∏–∑ —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∞–¥–º–∏–Ω–∞.
- `notify_location_start` / `notify_location_stop` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ä—Ç–µ/—Å—Ç–æ–ø–µ –≤–µ—â–∞–Ω–∏—è **–¥–ª—è —ç—Ç–æ–≥–æ –∞–¥–º–∏–Ω–∞**.
- `notify_absent_enabled` / `notify_absent_minutes` ‚Äî –ø–æ—Ä–æ–≥ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ¬´–Ω–µ—Ç –ª–æ–∫–∞—Ü–∏–∏¬ª **–¥–ª—è —ç—Ç–æ–≥–æ –∞–¥–º–∏–Ω–∞**.
- `send_current_location_with_alert` ‚Äî —Å–ª–∞—Ç—å –ª–∏ —ç—Ç–æ–º—É –∞–¥–º–∏–Ω—É –≥–µ–æ-—Ç–æ—á–∫—É –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö.
- `zones` ‚Äî —Å–ø–∏—Å–æ–∫ ID –∑–æ–Ω, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∞–¥–º–∏–Ω —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è = **–≤—Å–µ –∑–æ–Ω—ã**;
  - –µ—Å–ª–∏ –∑–∞–¥–∞–Ω —Å–ø–∏—Å–æ–∫, –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è **—Ç–æ–ª—å–∫–æ –ø–æ —ç—Ç–∏–º –∑–æ–Ω–∞–º**.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥–∞ `config.json`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—É–ø—Ä–æ—â—ë–Ω):

```json
{
  "global": {
    "secure": {
      "notify_exit": true,
      "notify_enter": true
    },
    "danger": {
      "notify_exit": true,
      "notify_enter": true
    }
  },
  "zones": [
    {
      "id": 1,
      "type": "secure",
      "name": "–°–∫–ª–∞–¥",
      "center": { "lat": 55.751244, "lng": 37.618423 },
      "radius_m": 1000.0,
      "notifications": {
        "override": false,
        "notify_on_enter": false,
        "notify_on_exit": false
      }
    }
  ],
  "telegram": {
    "global": {
      "notify_location_start": true,
      "notify_location_stop": true,
      "notify_absent_enabled": true,
      "notify_absent_minutes": 10,
      "send_current_location_with_alert": true
    },
    "admins": [
      {
        "id": 111111111,
        "name": "–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω",
        "override": false,
        "notify_location_start": true,
        "notify_location_stop": true,
        "notify_absent_enabled": true,
        "notify_absent_minutes": 10,
        "send_current_location_with_alert": true,
        "zones": []
      }
    ],
    "accept_from": {
      "mode": "any",
      "users": []
    },
    "show_sender": {
      "show_name": true,
      "show_id": true
    }
  }
}
```

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ —á–µ—Ä–µ–∑ HTML-–∫–∞—Ä—Ç—É

–í –∫–æ–º–ø–ª–µ–∫—Ç–µ –µ—Å—Ç—å HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä (–æ–¥–∏–Ω —Ñ–∞–π–ª `.html`), –∫–æ—Ç–æ—Ä–∞—è:

- —Ä–∏—Å—É–µ—Ç –∫–∞—Ä—Ç—É (OSM + Leaflet);
- –ø–æ–∑–≤–æ–ª—è–µ—Ç:
  - –¥–æ–±–∞–≤–ª—è—Ç—å **–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ** –∏ **–æ–ø–∞—Å–Ω—ã–µ** –∫—Ä—É–≥–æ–≤—ã–µ –∑–æ–Ω—ã –∫–ª–∏–∫–æ–º –ø–æ –∫–∞—Ä—Ç–µ;
  - –∑–∞–¥–∞–≤–∞—Ç—å —Ä–∞–¥–∏—É—Å, –∏–º—è, –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å override-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏;
  - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –∑–æ–Ω–∞–º;
  - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Telegram:
    - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (`notify_location_start`, `notify_absent_enabled` –∏ —Ç.–¥.);
    - —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤ –∏ –∏—Ö override-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏;
    - —Å–ø–∏—Å–æ–∫ ¬´–æ—Ç –∫–æ–≥–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é¬ª;
    - —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (`show_name`, `show_id`);
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–∫–æ–Ω—Ñ–∏–≥ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –ø–æ–ª–µ;
- –∏–º–µ–µ—Ç –∫–Ω–æ–ø–∫—É **¬´–°–∫–∞—á–∞—Ç—å config.json¬ª** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∫–∞–∫ —Ñ–∞–π–ª.

### –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–æ–º

1. –û—Ç–∫—Ä–æ–π HTML-—Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –∏–ª–∏ `File ‚Üí Open`).
2. –ù–∞ –∫–∞—Ä—Ç–µ:
   - –≤—ã–±–µ—Ä–∏ —Ç–∏–ø –∑–æ–Ω—ã (secure/danger), —Ä–∞–¥–∏—É—Å, –∏–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ);
   - –∫–ª–∏–∫–Ω–∏ –ø–æ –∫–∞—Ä—Ç–µ ‚Äî –¥–æ–±–∞–≤–∏—Ç—Å—è –∫—Ä—É–≥.
3. –ù–∞—Å—Ç—Ä–æ–π –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –∑–æ–Ω–∞–º.
4. –ó–∞–ø–æ–ª–Ω–∏ —Å–µ–∫—Ü–∏—é **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram**:
   - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏;
   - –¥–æ–±–∞–≤—å –∞–¥–º–∏–Ω–æ–≤ —Å –∏—Ö `id`;
   - —É–∫–∞–∂–∏ —Ä–µ–∂–∏–º `accept_from` –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).
5. –í–Ω–∏–∑—É –≤ —Å–µ–∫—Ü–∏–∏ ¬´JSON –∫–æ–Ω—Ñ–∏–≥¬ª –Ω–∞–∂–º–∏ **¬´–°–∫–∞—á–∞—Ç—å config.json¬ª**.
6. –ü–æ–ª–æ–∂–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `config.json` —Ä—è–¥–æ–º —Å `main.py` –±–æ—Ç–∞ (–∏–ª–∏ —Ç—É–¥–∞, –≥–¥–µ –µ–≥–æ –æ–∂–∏–¥–∞–µ—Ç –∫–æ–¥).

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –±–æ—Ç–∞

–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∞–º):

```text
project/
‚îú‚îÄ‚îÄ main.py          # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∑–∞–ø—É—Å–∫ aiogram
‚îú‚îÄ‚îÄ config_loader.py # –∑–∞–≥—Ä—É–∑–∫–∞ config.json
‚îú‚îÄ‚îÄ context.py       # –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (bot, dp, CONFIG)
‚îú‚îÄ‚îÄ models.py        # dataclass'—ã –¥–ª—è –∑–æ–Ω, Telegram-–∫–æ–Ω—Ñ–∏–≥–∞ –∏ —Ç.–ø.
‚îú‚îÄ‚îÄ geo.py           # –ª–æ–≥–∏–∫–∞ –≥–µ–æ–∑–æ–Ω, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, "–±–µ—Å—à–æ–≤–Ω—ã–µ" –∑–æ–Ω—ã
‚îú‚îÄ‚îÄ notify.py        # –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ä–∞—Å—á—ë—Ç —Ñ–ª–∞–≥–æ–≤
‚îú‚îÄ‚îÄ handlers.py      # aiogram-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π/–ª–æ–∫–∞—Ü–∏–π
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ config.json      # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
```

–ö—Ä–∞—Ç–∫–æ –ø–æ –º–æ–¥—É–ª—è–º:

- **`config_loader.py`**
  - —á–∏—Ç–∞–µ—Ç `config.json`;
  - –ø–∞—Ä—Å–∏—Ç –µ–≥–æ –≤ Python-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`dataclass`‚Äô—ã);
  - –∑–∞–ø–æ–ª–Ω—è–µ—Ç `GlobalZoneConfig`, —Å–ø–∏—Å–æ–∫ `Zone`, `TelegramConfig` –∏ —Ç.–¥.
- **`context.py`**
  - —Å–æ–∑–¥–∞—ë—Ç `Bot` –∏ `Dispatcher` (aiogram v3);
  - —Ö—Ä–∞–Ω–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π `CONFIG` (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥).
- **`geo.py`**
  - —Ñ—É–Ω–∫—Ü–∏—è `update_user_state(user_id, lat, lon)`:
    - —Å—á–∏—Ç–∞–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ –∑–æ–Ω;
    - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã (–ø–æ –∏–º–µ–Ω–∏ ‡§Ø‡§æ id);
    - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ `entered` –∏ `exited` (ID –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω);
    - —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `user_states` (–≤ –∫–∞–∫–∏—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω–∞—Ö —é–∑–µ—Ä –±—ã–ª –¥–æ —ç—Ç–æ–≥–æ).
- **`notify.py`**
  - `is_sender_allowed(user_id)` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `telegram.accept_from`.
  - `resolve_sender_label(user_id, full_name)` ‚Äî —Å—Ç—Ä–æ–∏—Ç —Å—Ç—Ä–æ–∫—É ¬´–û—Ç: ...¬ª.
  - `describe_zone(zone)` ‚Äî `"–ò–º—è"` –∏–ª–∏ `#id`.
  - `get_effective_zone_notify(zone)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `(notify_enter, notify_exit)` —Å —É—á—ë—Ç–æ–º override –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.
  - `get_admin_effective_flags(admin)` ‚Äî —Å–º–µ—à–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ Telegram-—Ñ–ª–∞–≥–∏ –∏ override –∞–¥–º–∏–Ω–∞.
  - `admin_interested_in_zone(admin, zone_id)` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–ø–∏—Å–∫—É –∑–æ–Ω –∞–¥–º–∏–Ω–∞.
  - `send_event_to_admins(...)` ‚Äî —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º –∞–¥–º–∏–Ω–∞–º:
    - —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Ö —Ñ–ª–∞–≥–∏;
    - –ø—Ä–∏ `send_current_location_with_alert=true` —à–ª—ë—Ç `send_location` —Å–ª–µ–¥–æ–º.
- **`handlers.py`**
  - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
    - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `.location`;
    - —Ä–∞–∑–ª–∏—á–∞–µ—Ç:
      - —Å—Ç–∞—Ä—Ç live-location;
      - –æ–±—ã—á–Ω—É—é —Ç–æ—á–∫—É;
  - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `edited_message`:
    - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è live-location (–Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã);
    - –æ–∫–æ–Ω—á–∞–Ω–∏–µ live-location.
  - –≤ `handle_location_event`:
    - –≤—ã–∑—ã–≤–∞–µ—Ç `update_user_state`;
    - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∑–æ–Ω—ã –ø–æ–∫–∏–Ω—É—Ç—ã/–≤—Ö–æ–¥;
    - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω—É–∂–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã —Å–æ–±—ã—Ç–∏–π;
    - –≤—ã–∑—ã–≤–∞–µ—Ç `send_event_to_admins`.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `requirements.txt`:

```text
aiogram>=3.0.0b5,<4.0.0
python-dotenv>=1.0.0  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å .env
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ `config.json`

- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —á–µ—Ä–µ–∑ HTML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä (—Å–º. –≤—ã—à–µ);
- –ü–æ–ª–æ–∂–∏ —Ñ–∞–π–ª —Ä—è–¥–æ–º —Å `main.py` (–∏–ª–∏ –≤ –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç `config_loader.py`).

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ú–∏–Ω–∏–º—É–º:

- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞;
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `CONFIG_PATH` ‚Äî –ø—É—Ç—å –∫ `config.json`, –µ—Å–ª–∏ –≤ –∫–æ–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è;

–ü—Ä–∏–º–µ—Ä (Linux/macOS):

```bash
export BOT_TOKEN="123456:ABC-DEF..."
# export CONFIG_PATH="/path/to/config.json"
python main.py
```

### 4. –ó–∞–ø—É—Å–∫

```bash
python main.py
```

–ï—Å–ª–∏ –≤—Å—ë –æ–∫:

- –±–æ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Telegram;
- –Ω–∞—á–Ω—ë—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å live-location –∏ –æ–±—ã—á–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏;
- –±—É–¥–µ—Ç —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É.

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –°–æ—Å—Ç–æ—è–Ω–∏–µ (`user_states`, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ç–∞–π–º–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è) —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏:
  - –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –æ–Ω ¬´–∑–∞–±—ã–≤–∞–µ—Ç¬ª –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–æ —ç—Ç–æ **–Ω–µ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**, –ø—Ä–æ—Å—Ç–æ –≤—Å–µ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è ¬´–≤–Ω–µ –∑–æ–Ω¬ª –¥–æ –ø–µ—Ä–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è;
- –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ª–æ–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤–æ–π —Ü–∏–∫–ª (—Ç–∞–π–º–µ—Ä):
  - –µ—Å–ª–∏ –±–æ—Ç –¥–æ–ª–≥–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –æ–Ω –ø—Ä–∏—à–ª—ë—Ç ¬´‚è∞ –ù–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ ...¬ª;
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∑–æ–Ω –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –≤—ã–Ω–µ—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ Redis/–ë–î ‚Äî —Å–µ–π—á–∞—Å –≤—Å—ë –¥–µ—Ä–∂–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞.
